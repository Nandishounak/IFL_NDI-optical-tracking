import numpy as np
from math import  pi, atan2

rot_mat_710= np.array([[0.9835921099847273, 0.1804066550207949, 0.0, 237.87978716900506],
                       [-0.006652468863948963, 0.03626981435770782, -0.9993198913383396, 231.4782284537973],
                       [-0.1802839588920941, 0.982923160471186, 0.03687485288822778, -730.7077584311251],
                       [0, 0, 0, 1]])
X_stl7 = np.array ([[-72.92],[45.00], [20.50],[1]])
X_stl10 = np.array ([[72.92],[-5.00], [20.50],[1]])

l10 = np.array( [[ 165.95486129 ],
 [211.43678046],
 [-717.90276172],
                [1]]) #4x1

l7 = np.array([[ 173.57390593],
 [ 212.96854953],
 [-676.39134719],
                [1]])
stl10 = np.linalg.pinv(rot_mat_710)@l10
print ('stl10', stl10)
stl7 = np.linalg.pinv(rot_mat_710)@l7
print ('stl7', stl7)

#error
mse10 = np.sum((stl10[1:] - X_stl10[1:])**2)
mse7= np.sum((stl7[1:] - X_stl7[1:])**2)

###################
# considering point 11 with 7
# X_stl11 = np.array ([[72.92],[-5.00], [-39.50],[1]])
# l11 = np.array([[227.14565338],
#  [ 214.47853593],
#  [-721.63417531],
#                 [1]])
#
# rot_mat_711= np.array([[0.4769845051878273, -0.8230193742578863, -0.3084232342202532, 248.67185653271957],
#                        [0.6544784435555758, 0.566819034236229, -0.5003740094655007, 245.35817706315493],
#                        [0.5866376639219445, 0.0368142910249026, 0.8090123356565947, -649.2858114295184],
#                        [0, 0, 0, 1]])
# stl11 = np.linalg.pinv(rot_mat_711)@l11
# print ('stl11', stl11)
# stl7 = np.linalg.pinv(rot_mat_711)@l7
# print ('stl7', stl7)
#
# #error
# mse11 = np.sum((stl11[1:] - X_stl11[1:])**2)
# mse7= np.sum((stl7[1:] - X_stl7[1:])**2)


# now checking with 4 and 7
# X_stl4 = np.array ([[145.06],[45.00], [20.50],[1]])
# l4 = np.array([[136.61191981],
#  [ -227.07587757],
#  [-755.16713787],
#                 [1]])
#
# rot_mat_47= np.array([[-0.0824004409029683, 0.9965993012936528, 0.0, 113.21812821373695],
#                       [-0.9810039614320399, -0.0811109929985192, -0.17621644210867438, 35.593580621269126],
#                       [-0.17561718308195828, -0.01452031252410716, 0.9843514441146314, -728.9705212774439],
#                       [0, 0, 0, 1]])
#
# stl7 = np.linalg.pinv(rot_mat_47)@l7
# print ('stl7', stl7)
# stl4 = np.linalg.pinv(rot_mat_47)@l4
# print ('stl4', stl4)
# mse7= np.sum((stl7[0:] - X_stl7[0:])**2)
# mse4= np.sum((stl4[0:] - X_stl4[0:])**2)